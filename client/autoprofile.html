
<!-- Outer -->
<template name="autoProfile">
  {{#with options}}
    <div class="autoprofile-container target profile">
      {{#if containers}}
        <div class="row cf-dfs-outer-row">
          {{#each containers}}
            <div class="{{class}}">
              {{#each rows}}
                {{>autoProfileRow}}
              {{/each}}
            </div>
          {{/each}}
        </div>
      {{else}}
        {{#each rows}}
          {{>autoProfileRow}}
        {{/each}}
      {{/if}}

      {{#afModal  formId=getEditFormId
                  fields=getFields
                  collection=getCollectionName
                  meteormethod=getMethod
                  meteormethodargs=getMethodArgs
                  meteorupdatemethod=getMeteorUpdateMethod
                  doc=getDocId
                  callContext=getCallContext
                  operation="update"
                  buttonContent="Speichern"
                  buttonClasses="btn cf-button-modals p-2"
                  placeholder=true
                  template = getAutoprofileTemplate
                  title="Profil bearbeiten"
                  backdrop=true
                  class=getEditButtonClass
                  validationScope="fields"
                  validation="keyup"
                  doNotClean=true
      }}<span class="icon-user"></span> Profil bearbeiten{{/afModal}}

      {{#afModal  formId="AutoProfileAddArrayItemForm"
                  fields=getFields
                  collection=getCollectionName
                  meteormethod=getMethod
                  validationScope="fields"
                  validation="submit"
                  doc=getDocId
                  callContext=getCallContext
                  operation="update"
                  buttonContent="Speichern"
                  buttonClasses="btn cf-button-modals p-2"
                  placeholder=true
                  template = getAutoprofileTemplate
                  title="Eintrag Hinzufügen"
                  backdrop=true
                  class=getAddArrayItemButtonClass
      }}<span class="icon-user"></span> Hinzufügen{{/afModal}}

      {{#afModal  formId="AutoProfileCreateReferenceDocAndAddArrayItemForm"
                  fields=getFields
                  collection=getCollectionName
                  meteormethod=getMethod
                  callContext=getCallContext
                  validationScope="fields"
                  validation="submit"
                  operation="insert"
                  buttonContent="Erstellen"
                  buttonClasses="btn cf-button-modals p-2"
                  placeholder=true
                  template = getAutoprofileTemplate
                  title="Eintrag Hinzufügen"
                  backdrop=true
                  class=getCreateReferenceDocAndAddArrayItemButtonClass
      }}<span class="icon-user"></span> erstellen{{/afModal}}
    </div>
  {{else}}
    NO options found!
  {{/with}}
</template>

<template name="autoProfileRow">
  <div class="row">
    {{#each cols}}
      {{>autoProfileCol}}
    {{/each}}
  </div>
</template>

<template name="autoProfileCol">
  <div class="{{class}}">
    {{#each panels}}
      {{#if cols}}
        {{>autoProfileRow}}
      {{else}}
        {{>autoProfilePanel}}
      {{/if}}
    {{/each}}
  </div>
</template>
